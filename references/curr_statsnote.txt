Scoring and Signal Detection Configuration (current)

Runtime environment (observed on server)
- GATE_MODE: CUSTOM (env overrides active)
  - HIGH_CONFIDENCE_SCORE: 6
  - MIN_LIQUIDITY_USD: 15000
  - VOL_TO_MCAP_RATIO_MIN: 0.50
  - MAX_MARKET_CAP_FOR_DEFAULT_ALERT: 750,000
  - VOL_24H_MIN_FOR_ALERT: 20,000
  - REQUIRE_MOMENTUM_1H_MIN_FOR_ALERT: 10
  - REQUIRE_VELOCITY_MIN_SCORE_FOR_ALERT: 3
- CIELO_DISABLE_STATS: False
- Feed scope:
  - MIN_USD_VALUE: 0
  - CIELO_LIST_ID: 103946
  - CIELO_LIST_IDS: [103946, 8137, 52126, 19441, 16546, 3306, 25954, 34228, 102966]
  - CIELO_NEW_TRADE_ONLY: False
- Detailed fetch prelim threshold: PRELIM_DETAILED_MIN = 3 (env)
- Smart money requirement for alert: REQUIRE_SMART_MONEY_FOR_ALERT = True (meta gate)
- Velocity requirement for alert: REQUIRE_VELOCITY_MIN_SCORE_FOR_ALERT = 3 (meta gate)

Static thresholds and defaults (from code; apply unless overridden)
- Preliminary USD tiers: PRELIM_USD_LOW=250, PRELIM_USD_MID=750, PRELIM_USD_HIGH=2000
- Pre-detail velocity path: PRELIM_VELOCITY_MIN_SCORE=3, VELOCITY_REQUIRED=5
- Market cap buckets: MCAP_MICRO_MAX=100k, MCAP_SMALL_MAX=1M, MCAP_MID_MAX=10M
- Volume thresholds (24h): VOL_MED=10k, VOL_HIGH=50k, VOL_VERY_HIGH=100k
- Momentum: MOMENTUM_1H_STRONG=5%, MOMENTUM_1H_PUMPER=20%, DRAW_24H_MAJOR=-80%
- Safety caps: MAX_TOP10_CONCENTRATION=45%
- Nuanced factors: NUANCED_SCORE_REDUCTION=1, NUANCED_LIQUIDITY_FACTOR=0.5, NUANCED_VOL_TO_MCAP_FACTOR=0.7, NUANCED_MCAP_FACTOR=1.5, NUANCED_TOP10_CONCENTRATION_BUFFER=10
- Security gates: REQUIRE_MINT_REVOKED=false, REQUIRE_LP_LOCKED=false, ALLOW_UNKNOWN_SECURITY=true
- Alert throttle: TELEGRAM_ALERT_MIN_INTERVAL=0 (seconds; 0 disables)
- Tracking: TRACK_INTERVAL_MIN=60, TRACK_BATCH_SIZE=25

Feed acquisition
- Cycles alternate: general and smart-money.
- General params: limit=100, chains=solana, optional minimum_usd_value, list_id(s), new_trade.
- Smart-money params: smart_money=true, min_wallet_pnl=1000, top_wallets=true.
- Rate-limit handling: exponential/Retry-After cooldown, cycle flip.

Smart-money detection (used by prelim bonus and routing)
- Looser detector (current bot): smart if smart cycle OR any strong hint is present.
  - Hints: explicit flags smart_money/is_smart/isTopWallet, non-empty top_wallets list, any wallet/trader PnL ≥ 1000–2000, labels contain smart/top/alpha/elite.

Preliminary scoring (credit-free)
- Start 0 (cap 10):
  - +4 if smart_money_detected
  - +3 if usd_value > PRELIM_USD_HIGH; else +2 if > PRELIM_USD_MID; else +1 if > PRELIM_USD_LOW

Velocity tracking (credit-free)
- Persist each tx; DB velocity over last 15m: velocity_score = min(observations*2 + smart_money_interactions, 10) and unique_traders counted.

Detailed-stats fetch decision
- Fetch if prelim_score ≥ PRELIM_DETAILED_MIN, OR (prelim_score ≥ PRELIM_VELOCITY_MIN_SCORE AND velocity_score ≥ VELOCITY_REQUIRED). Otherwise skip and count as API credit saved.

Detailed stats sources
- Primary: Cielo token/stats (API key variants, retry/backoff; 20s timeouts).
- Augmentation: when Cielo lacks liquidity/mcap/vol, merge DexScreener values (source = "cielo+ds").

Final scoring (raw + velocity bonuses; cap 10)
- +3 if smart_money_detected
- Market cap: +3 micro (<100k), +2 small (<1M), +1 mid (<10M); +1 microcap sweet band (10k–50k)
- 24h volume: +3 very high (>100k), +2 high (>50k), +1 med (>10k)
- Unique traders (24h from stats): +2 if >500; +1 if >200
- Momentum: +2 if 1h > max(MOMENTUM_1H_STRONG, MOMENTUM_1H_PUMPER); else +1 if 1h > 0
- Risk: −1 if 24h change < DRAW_24H_MAJOR
- Velocity bonuses (from DB/15m): + velocity_score//2; +2 if unique_traders >25, +1 if >10

Optional meta gates before safety
- Drop if REQUIRE_SMART_MONEY_FOR_ALERT=true and not smart.
- Drop if REQUIRE_VELOCITY_MIN_SCORE_FOR_ALERT>0 and (velocity_bonus//2) below threshold//2.

Moiety gates (safety and metrics)
- Senior Strict (must pass for all):
  - Reject honeypot; reject stable/major symbols or stable mints.
  - If REQUIRE_MINT_REVOKED=true: require is_mint_revoked==True (unknown fails).
  - If REQUIRE_LP_LOCKED=true: require LP locked/burned (unknown fails).
  - If top10 concentration known and > MAX_TOP10_CONCENTRATION: reject.
- Junior Strict (metrics):
  - liquidity_usd ≥ MIN_LIQUIDITY_USD (now enforced with cielo+ds merge)
  - volume_24h ≥ VOL_24H_MIN_FOR_ALERT
  - market_cap ≤ MAX_MARKET_CAP_FOR_DEFAULT_ALERT OR (change_1h ≥ LARGE_CAP_MOMENTUM_GATE_1H)
  - volume_24h / market_cap ≥ VOL_TO_MCAP_RATIO_MIN
  - final_score ≥ HIGH_CONFIDENCE_SCORE
- Nuanced fallback (current logic):
  - If smart_money_detected: must pass Junior Strict (no fallback).
  - If NOT smart_money_detected:
    - If Junior Strict passes → alert (Strict Rules).
    - Else try Junior Nuanced:
      - liquidity_usd ≥ MIN_LIQUIDITY_USD * NUANCED_LIQUIDITY_FACTOR
      - market_cap ≤ MAX_MARKET_CAP_FOR_DEFAULT_ALERT * NUANCED_MCAP_FACTOR
      - volume_24h / market_cap ≥ VOL_TO_MCAP_RATIO_MIN * NUANCED_VOL_TO_MCAP_FACTOR
      - final_score ≥ HIGH_CONFIDENCE_SCORE - NUANCED_SCORE_REDUCTION
    - If Nuanced Junior fails → reject.

Alert emission and throttling
- Optional TELEGRAM_ALERT_MIN_INTERVAL seconds between alerts; compose HTML alert with safety badges; send; on success, persist baselines, optionally relay CA, log to alerts.jsonl.

Tracking and outcomes
- Every TRACK_INTERVAL_MIN minutes, up to TRACK_BATCH_SIZE tokens updated; track peaks and drawdown; outcome='rug' if (liquidity ≤ RUG_MIN_LIQUIDITY_USD) OR (drawdown ≥ RUG_DRAWDOWN_PCT), else 'ongoing'.

Monitoring
- process.jsonl: startup, cooldown, per-cycle heartbeat (cycle/feed_items/processed_count/api_calls_saved/alerts_sent), alert_sent events.
- stdout.log: feed, gating decisions, scores, rejections/passes, errors.


Growth strategy (zero‑latency auto‑trade, high‑conviction)
- Entry trigger: "PASSED (Strict + Smart Money)" only.
- Hard gates: LP ≥ $15k; vol/mcap ≥ 0.45; mcap ≤ $1.5M OR 1h ≥ 20%; no honeypot.
- Sizing: $60 per entry Day 1–2 (max 3 concurrent); raise to $80 if 3h rolling hit‑rate ≥ 35% and avg_x ≥ 1.4.
- Execution: pre‑built Jupiter v6 swap (Raydium first), compute budget + priority fee, Jito bundle + RPC race; slippage 7–12% adaptive.
- Stops/Exits: hard stop −12% or LP < $10k; at 2x, de‑risk to cost basis; 22% trailing from peak after 2x (tighten to 18% if spread ≤1.5% & ratio ≥0.8); scale‑out 3x/5x/8x.
- Hygiene: cool‑down per pair 15m; total risk ≤ 40% bankroll; log PnL and reasons.

