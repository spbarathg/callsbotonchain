:80 {
    # Avoid compressing SSE; gzip/zstd can corrupt event-stream in some proxies
    # encode zstd gzip

    @blocksql path /api/sql
    respond @blocksql 403

    # basicauth is intentionally disabled for public dashboard

    reverse_proxy web:8080 {
        transport http {
            read_timeout  60s
            write_timeout 60s
            dial_timeout  3s
            keepalive     30s
        }
    }
}
